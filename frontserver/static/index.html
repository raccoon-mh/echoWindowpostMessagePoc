<!DOCTYPE html>

<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iframe Parent</title>
</head>

<body>
    <h1>Iframe Parent</h1>
    <iframe id="iframe" src="http://localhost:8888/getinfo" style="width:600px; height:400px;"></iframe>

    <script>
        const iframe = document.getElementById('iframe');

        iframe.onload = function() {
            const data = {
                accessToken: "accesstokenExample", // 있는지 확인
                workspaceInfo: {
                    "id": "8b2df1f9-b937-4861-b5ce-855a41c346bc",
                    "name": "workspace2",
                    "description": "workspace2 desc",
                    "created_at": "2024-06-18T00:10:16.192337Z",
                    "updated_at": "2024-06-18T00:10:16.192337Z"
                },
                projectInfo: {
                    "id": "1e88f4ea-d052-4314-80a4-9ac3f6691feb",
                    "ns_id": "project1",
                    "name": "project1",
                    "description": "project1 desc",
                    "created_at": "2024-06-18T00:28:57.094105Z",
                    "updated_at": "2024-06-18T00:28:57.094105Z"
                },
                requestUrl: "/target"
            };
            iframe.contentWindow.postMessage(data, "http://localhost:8888");
        };

        window.addEventListener("message", function(event) {
            console.log("frontServer : Message received in parent:", event.data);
        });
    </script>
</body>
</html>